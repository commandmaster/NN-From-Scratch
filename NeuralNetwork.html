<!doctypehtml><html lang=EN-us><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>NN from scratch - raylib</title><meta content="NN from scratch - raylib"name=title><meta content="Neural network visualization using raylib and C++"name=description><meta content="raylib, programming, examples, html5, C, C++, library, learn, games, videogames, neural network, machine learning, emscripten"name=keywords><meta content="width=device-width"name=viewport><meta content="NN from scratch - raylib"property=og:title><meta content="Neural network visualization using raylib and C++"property=og:description><meta content="NN from scratch - raylib"name=twitter:title><meta content="Neural network visualization using raylib and C++"name=twitter:description><link href=https://www.raylib.com/favicon.ico rel="shortcut icon"><style>body{margin:0;overflow:hidden;background-color:#f0f0f0;font-family:sans-serif;display:flex;flex-direction:column;height:100vh}#controls{padding:10px;background-color:#e0e0e0;border-bottom:1px solid #ccc;flex-shrink:0}#status{margin-left:10px;font-style:italic;color:#333}#canvas-container{flex-grow:1;display:flex;justify-content:center;align-items:center;background-color:#000;overflow:hidden}canvas.emscripten{border:0 none;background-color:#000}#output{display:none;width:98%;height:100px;margin:5px;border:1px solid gray;font-family:monospace;font-size:10px}</style><script src=https://cdn.jsdelivr.net/gh/eligrey/FileSaver.js/dist/FileSaver.min.js></script><script>function saveFileFromMEMFSToDisk(e,o){console.log(`Attempting to save MEMFS file '${e}' as '${o}'`);try{var t,l=FS.readFile(e);t=new Blob([l.buffer],{type:"application/octet-binary"}),saveAs(t,o),console.log("File saved successfully.")}catch(e){console.error("Error saving file from MEMFS: ",e),alert(`Failed to save file: ${e.message||e}`)}}function setupFileLoader(e){const o=document.getElementById("weightsFileInput"),t=document.getElementById("status");if(!o||!t||!e)return console.error("File loader setup failed: HTML Elements or Emscripten Module not found."),void(t&&(t.textContent="Error: File loader UI elements missing."));console.log("Setting up file loader. Checking Module object:",e),console.log("Checking for Module.ccall:",typeof e.ccall),console.log("Checking for Module._loadWeightsFromBuffer (direct export):",typeof e._loadWeightsFromBuffer);if("function"!=typeof e.ccall)return console.error("Critical Error: Module.ccall runtime method not found or not exported!"),t.textContent="Error: Emscripten runtime issue (ccall missing).",void(o.disabled=!0);console.log("Proceeding to add event listener for file input."),o.addEventListener("change",(l=>{const r=l.target.files[0];if(!r)return void(t.textContent="No file selected.");if(!r.name.endsWith(".data"))return t.textContent="Please select a .data file.",void(o.value="");t.textContent=`Reading file: ${r.name}...`;const n=new FileReader;n.onload=l=>{const n=l.target.result;if(!n||0===n.byteLength)return t.textContent=`Error: File ${r.name} is empty or could not be read.`,console.error(`FileReader onload: ArrayBuffer is null or empty for ${r.name}`),void(o.value="");t.textContent=`File read (${n.byteLength} bytes). Loading into network...`;let i=0,a=!1;try{if(console.log(`Allocating ${n.byteLength} bytes in WASM heap...`),i=e._malloc(n.byteLength),0===i)throw new Error(`Failed to allocate ${n.byteLength} bytes in WASM heap.`);if(console.log(`Allocated memory at address: ${i}`),console.log("Copying data to WASM heap..."),e.HEAPU8.set(new Uint8Array(n),i),console.log("Data copied."),console.log("Calling C++ loadWeightsFromBuffer..."),a=e.ccall("loadWeightsFromBuffer","boolean",["number","number"],[i,n.byteLength]),console.log(`C++ function returned: ${a}`),!a)throw new Error(`C++ function reported failure loading weights from ${r.name}. Check C++ logs.`);t.textContent=`Weights loaded successfully from ${r.name}!`,console.log("Weights loading process completed successfully.")}catch(e){t.textContent=`Error loading weights: ${e.message||e}`,console.error("Error during weights loading:",e),a=!1}finally{0!==i?(console.log(`Freeing WASM memory at address: ${i}`),e._free(i),console.log("WASM memory freed.")):console.log("No WASM memory to free (allocation failed or pointer was zero)."),o.value="",console.log("File input reset.")}},n.onerror=e=>{t.textContent="Error reading file.",console.error("FileReader error:",e),o.value=""},n.readAsArrayBuffer(r)})),t.textContent="Ready to load weights file (.data)",console.log("File loader setup complete. Waiting for file selection.")}</script></head><body><div id=controls><label for=weightsFileInput>Load Weights:</label><input accept=.data id=weightsFileInput type=file><span id=status>Initializing...</span></div><div id=canvas-container><canvas class=emscripten id=canvas oncontextmenu=event.preventDefault() tabindex=-1></canvas></div><textarea id=output rows=8></textarea><script>var Module={preRun:[],postRun:[function(){console.log("WASM Runtime Initialized (postRun). Setting up file loader..."),"function"==typeof setupFileLoader?setupFileLoader(Module):console.error("setupFileLoader function not defined when postRun executed!"),console.log("postRun execution complete.")}],print:function(){var e=document.getElementById("output");return e&&(e.value=""),function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments).join(" ")),console.log(t),e&&(e.value+=t+"\n",e.scrollTop=e.scrollHeight)}}(),printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e);var t=document.getElementById("output");t&&(t.value+="ERROR: "+e+"\n",t.scrollTop=t.scrollHeight)},canvas:function(){var e=document.getElementById("canvas");return e.addEventListener("webglcontextlost",(function(e){alert("WebGL context lost. You will need to reload the page."),e.preventDefault()}),!1),e}(),setStatus:function(e){if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.last.text){var t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),o=Date.now();t&&o-Module.setStatus.last.time<30||(Module.setStatus.last.time=o,Module.setStatus.last.text=e,console.log("Emscripten Status: ",e))}},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"All downloads complete.")}};Module.setStatus("Downloading..."),window.onerror=function(e){Module.setStatus("Exception thrown, see JavaScript console"),console.error("Unhandled window error:",e)}</script><script src=NeuralNetwork.js async></script></body></html>